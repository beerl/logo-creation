<!DOCTYPE html>
<html lang="fr" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processeur de Logo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>
<body>
    <div class="container-fluid vh-100 d-flex flex-column">

        <div class="row flex-grow-1 align-items-center justify-content-center mx-0">
            <div class="col-lg-5">
                <div class="card shadow">
                    <div class="card-header">
                        <h5><i class="fas fa-upload me-2"></i>Télécharger votre logo</h5>
                    </div>
                    <div class="card-body">
                        <p>Vous pouvez soit télécharger un logo, créer un logo à partir de texte ou soit créer une carte.</p>
                        <form id="logo-form" enctype="multipart/form-data">
                            <!-- Choix du type de logo -->
                            <div class="mb-3">
                                <label class="form-label">Type de logo</label>
                                <div class="btn-group d-flex" role="group">
                                    <input type="radio" class="btn-check" name="logo-type" id="type-image" value="image" checked>
                                    <label class="btn btn-outline-primary" for="type-image">
                                        <i class="fas fa-image me-2"></i>Choisir une image
                                    </label>
                                    <input type="radio" class="btn-check" name="logo-type" id="type-text" value="text">
                                    <label class="btn btn-outline-primary" for="type-text">
                                        <i class="fas fa-font me-2"></i>Créer un texte
                                    </label>
                                    <input type="radio" class="btn-check" name="logo-type" id="type-card" value="card">
                                    <label class="btn btn-outline-primary" for="type-card">
                                        <i class="fas fa-credit-card me-2"></i>Créer une carte
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Section image -->
                            <div id="image-section" class="mb-3">
                                <label for="logo" class="form-label">Choisissez une image (PNG, JPG, JPEG, SVG)</label>
                                <input class="form-control" type="file" id="logo" name="logo" accept=".png,.jpg,.jpeg,.gif,.svg">
                            </div>
                            
                            <!-- Section carte (masquée par défaut) -->
                            <div id="card-section" class="mb-3 d-none">
                                <label for="card-logo" class="form-label">Logo à placer sur la carte (PNG, JPG, JPEG, GIF)</label>
                                <input class="form-control" type="file" id="card-logo" name="card-logo" accept=".png,.jpg,.jpeg,.gif">
                            </div>
                            
                            <!-- Section texte (masquée par défaut) -->
                            <div id="text-section" class="mb-3 d-none">
                                <label for="logo-text" class="form-label">Entrez votre texte</label>
                                <textarea class="form-control" id="logo-text" name="logo-text" 
                                    placeholder="Votre texte ici..." 
                                    rows="2" 
                                    maxlength="100"
                                    style="resize: vertical; min-height: 60px;"
                                ></textarea>
                                <small class="text-muted">Maximum 100 caractères - Appuyez sur Entrée pour un retour à la ligne - Mise à jour automatique</small>
                            </div>
                            
                            <!-- Contrôles d'ajustement (masqués par défaut) -->
                            <div id="adjustment-controls" class="d-none">
                                <h6 class="d-flex align-items-center">
                                    <i class="fas fa-sliders me-1"></i>Paramètres
                                </h6>
                                
                                <div class="slider-group">
                                    <label for="horizontal-position" class="form-label d-flex justify-content-between align-items-center">
                                        <span>Position horizontale</span>
                                        <span class="text-muted small ms-2" id="horizontal-value">0 px</span>
                                    </label>
                                    <div class="d-flex align-items-center gap-2">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="horizontal-decrease"><i class="fas fa-chevron-left"></i></button>
                                        <span class="text-muted small">G</span>
                                        <input type="range" class="form-range flex-grow-1" id="horizontal-position" min="-500" max="500" value="0" step="10">
                                        <span class="text-muted small">D</span>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="horizontal-increase"><i class="fas fa-chevron-right"></i></button>
                                    </div>
                                </div>

                                <div class="slider-group">
                                    <label for="vertical-position" class="form-label d-flex justify-content-between align-items-center">
                                        <span>Position verticale</span>
                                        <span class="text-muted small ms-2" id="vertical-value">0 px</span>
                                    </label>
                                    <div class="d-flex align-items-center gap-2">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="vertical-decrease"><i class="fas fa-chevron-down fa-rotate-90"></i></button>
                                        <span class="text-muted small">H</span>
                                        <input type="range" class="form-range flex-grow-1" id="vertical-position" min="-500" max="500" value="0" step="10">
                                        <span class="text-muted small">B</span>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="vertical-increase"><i class="fas fa-chevron-up fa-rotate-90"></i></button>
                                    </div>
                                </div>

                                <div class="slider-group">
                                    <label for="scale-factor" class="form-label d-flex justify-content-between align-items-center">
                                        <span>Taille</span>
                                        <span class="text-muted small ms-2" id="scale-value">100%</span>
                                    </label>
                                    <div class="d-flex align-items-center gap-2">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="scale-decrease"><i class="fas fa-minus"></i></button>
                                        <input type="range" class="form-range flex-grow-1" id="scale-factor" min="0.25" max="3.0" value="1.0" step="0.05">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="scale-increase"><i class="fas fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2" id="process-button-container">
                                <button type="submit" class="btn btn-primary shadow" id="upload-btn">
                                    <i class="fas fa-cogs me-2"></i>Traiter le logo
                                </button>
                            </div>
                        </form>
                        
                        <div class="alert alert-danger mt-3 d-none" id="error-message" role="alert"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-5">
                <div class="card shadow">
                    <div class="card-header">
                        <h5><i class="fas fa-eye me-2"></i>Prévisualisation</h5>
                    </div>
                    <div class="card-body text-center">
                        <div id="preview-container" class="preview-container mb-3 shadow-sm" style="min-height: 500px;">
                            <!-- Guides simples (uniquement dans la prévisualisation) -->
                            <div id="simple-guides" class="simple-guides d-none">
                                <!-- Ligne horizontale à 73px du haut -->
                                <div class="guide-line-horizontal"></div>
                                <!-- Ligne verticale à 73px de la droite -->
                                <div class="guide-line-vertical"></div>
                                <!-- Rectangle zone maximale logo 613x283px -->
                                <div class="logo-max-zone"></div>
                            </div>
                            
                            <div id="no-preview" class="no-preview">
                                <i class="fas fa-image fa-4x mb-3"></i>
                                <p>Aucune prévisualisation disponible.<br>Téléchargez un logo pour voir le résultat.</p>
                            </div>
                            <div id="loading" class="d-none">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Chargement...</span>
                                </div>
                                <p class="mt-2">Traitement en cours...</p>
                            </div>
                            <img id="preview-image" class="img-fluid d-none" alt="Logo traité">
                        </div>
                        
                        <div id="download-container" class="d-none">
                            <div class="d-grid">
                                <a id="preview-download-btn" class="btn btn-primary shadow" href="#" download>
                                    <i class="fas fa-download me-2"></i>Télécharger
                                </a>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="py-4 text-center">
            <p class="text-muted mb-0">© 2025 - Worklife</p>
        </footer>
    </div>
    
    <script src="{{ url_for('static', filename='js/logo_processor.js') }}"></script>
</body>
</html>
